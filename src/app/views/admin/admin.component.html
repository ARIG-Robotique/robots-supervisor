<div class="mt-3 mb-3">
  <button (click)="addRobot()" class="btn btn-primary">Nouveau robot</button>
</div>

<div class="row">
  <div class="col-3">
    <div class="card">
      <h5 class="card-header">
        <fa-icon icon="robot"></fa-icon>
        Robots
      </h5>

      <ul class="list-group list-group-flush">
        <li class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
            *ngFor="let robot of robots$ | async"
            (click)="selectRobot(robot)"
            [ngClass]="{'active': selectedRobot && robot.id === selectedRobot.id}">
          {{robot.name}}

          <span class="badge" *ngIf="!robot.copying">{{robot.host}}</span>

          <span class="badge" *ngIf="robot.copying">
            <span class="spinner"></span>
            {{robot.message}}
          </span>

          <span class="ml-auto"></span>

          <span (click)="$event.stopPropagation()">
            <fa-icon icon="edit" class="ml-1" ngbTooltip="Ã‰diter" placement="top"
                     (click)="editRobot(robot)"></fa-icon>
            <fa-icon icon="database" class="ml-1" ngbTooltip="Importer logs" placement="top"
                     (click)="importLogs(robot)"></fa-icon>
            <fa-icon icon="window-close" class="ml-1" ngbTooltip="Supprimer" placement="top"
                     (click)="deleteRobot(robot)"></fa-icon>
          </span>
        </li>
      </ul>
    </div>
  </div>

  <div class="col-9" *ngIf="selectedRobot != null">
    <div class="card">
      <h5 class="card-header">
        <fa-icon icon="robot"></fa-icon>
        Execs de robot <strong>{{selectedRobot.name}}</strong>
      </h5>
      <ul class="list-group list-group-flush">
        <li class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
            *ngFor="let exec of execs$ | async">
          {{exec.numberExec}} - du {{exec.dateStart | date: 'medium'}}
          <i>au</i> {{exec.dateEnd | date: 'medium'}}

          <span class="ml-auto"></span>

          <fa-icon icon="window-close" class="ml-1" (click)="deleteExec(exec)"></fa-icon>
        </li>
      </ul>
    </div>
  </div>
</div>
